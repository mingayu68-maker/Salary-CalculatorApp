<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>(사)한국주유소협회 경기도회 간단 월급계산기 V2</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel (for JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; -webkit-tap-highlight-color: transparent; }
        /* Print Styles */
        @media print {
            .print\:hidden { display: none !important; }
            .print\:block { display: block !important; }
            .print\:shadow-none { box-shadow: none !important; }
            .print\:border-none { border: none !important; }
            .print\:bg-white { background-color: white !important; }
            .print\:text-black { color: black !important; }
            .print\:p-0 { padding: 0 !important; }
            .print\:pb-0 { padding-bottom: 0 !important; }
            .print\:border-gray-300 { border-color: #d1d5db !important; }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        // --- Icons (Lucide Replacements) ---
        const IconBase = ({ children, size = 24, className = "", ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const Users = (p) => <IconBase {...p}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></IconBase>;
        const Calendar = (p) => <IconBase {...p}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></IconBase>;
        const Calculator = (p) => <IconBase {...p}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></IconBase>;
        const Plus = (p) => <IconBase {...p}><path d="M5 12h14"/><path d="M12 5v14"/></IconBase>;
        const Trash2 = (p) => <IconBase {...p}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></IconBase>;
        const Save = (p) => <IconBase {...p}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></IconBase>;
        const Info = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const DollarSign = (p) => <IconBase {...p}><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></IconBase>;
        const FileText = (p) => <IconBase {...p}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></IconBase>;
        const Moon = (p) => <IconBase {...p}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></IconBase>;
        const Gift = (p) => <IconBase {...p}><polyline points="20 12 20 22 4 22 4 12"/><rect width="20" height="5" x="2" y="7"/><line x1="12" x2="12" y1="22" y2="7"/><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/></IconBase>;
        const Building2 = (p) => <IconBase {...p}><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></IconBase>;
        const Printer = (p) => <IconBase {...p}><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></IconBase>;
        const MessageCircle = (p) => <IconBase {...p}><path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"/></IconBase>;
        const List = (p) => <IconBase {...p}><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></IconBase>;
        const Send = (p) => <IconBase {...p}><line x1="22" x2="11" y1="2" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></IconBase>;
        const BookOpen = (p) => <IconBase {...p}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>;
        const Fuel = (p) => <IconBase {...p}><path d="M3 22v-8a2 2 0 0 1 2-2h2.5"/><path d="M11.5 14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v8Z"/><path d="M13 2a2 2 0 0 1 2 2v2h-4V4a2 2 0 0 1 2-2Z"/><path d="M14 13.5a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2Z"/><path d="M7 12h2"/></IconBase>;
        const RotateCcw = (p) => <IconBase {...p}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></IconBase>;

        // --- Constants ---
        const CONSTANTS = {
            MIN_WAGE_2026: 10320, 
            INSURANCE_RATES: {
                PENSION: 0.045, 
                HEALTH: 0.03545, 
                CARE: 0.1295, 
                EMPLOYMENT: 0.009, 
            },
            TAX_RATES: { LOCAL: 0.1 }
        };

        const generateId = () => Math.random().toString(36).substr(2, 9);

        // --- App Component ---
        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-xl shadow-sm border border-gray-100 ${className}`}>
                {children}
            </div>
        );

        const Button = ({ children, onClick, variant = "primary", className = "", disabled = false }) => {
            const baseStyle = "px-4 py-2 rounded-lg font-medium transition-all active:scale-95 flex items-center justify-center gap-2";
            const variants = {
                primary: "bg-indigo-600 text-white hover:bg-indigo-700 shadow-md shadow-indigo-200",
                secondary: "bg-white text-gray-700 border border-gray-200 hover:bg-gray-50",
                danger: "bg-red-50 text-red-600 hover:bg-red-100",
                ghost: "text-gray-500 hover:bg-gray-100"
            };
            return (
                <button 
                onClick={onClick} 
                disabled={disabled}
                className={`${baseStyle} ${variants[variant]} ${disabled ? 'opacity-50 cursor-not-allowed' : ''} ${className}`}
                >
                {children}
                </button>
            );
        };

        const Input = ({ label, value, onChange, type = "text", placeholder = "", suffix = "" }) => (
            <div className="flex flex-col gap-1 w-full">
                {label && <label className="text-xs font-semibold text-gray-500 uppercase tracking-wider">{label}</label>}
                <div className="relative">
                <input
                    type={type}
                    value={value}
                    onChange={onChange}
                    placeholder={placeholder}
                    className="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-gray-800"
                />
                {suffix && <span className="absolute right-3 top-2.5 text-gray-400 text-sm">{suffix}</span>}
                </div>
            </div>
        );

        function App() {
            const [activeTab, setActiveTab] = React.useState('help');
            
            // --- Local Storage Initialization ---
            const [employees, setEmployees] = React.useState(() => {
                const saved = localStorage.getItem('gas_station_employees');
                return saved ? JSON.parse(saved) : [];
            });

            const [workLogs, setWorkLogs] = React.useState(() => {
                const saved = localStorage.getItem('gas_station_workLogs');
                return saved ? JSON.parse(saved) : [];
            });

            const [isSmallBusiness, setIsSmallBusiness] = React.useState(() => {
                const saved = localStorage.getItem('gas_station_isSmallBusiness');
                return saved ? JSON.parse(saved) : true;
            });

            const [selectedMonth, setSelectedMonth] = React.useState(new Date().toISOString().slice(0, 7));
            const [selectedEmpId, setSelectedEmpId] = React.useState('');

            // --- Effects to sync with Local Storage ---
            React.useEffect(() => {
                localStorage.setItem('gas_station_employees', JSON.stringify(employees));
            }, [employees]);

            React.useEffect(() => {
                localStorage.setItem('gas_station_workLogs', JSON.stringify(workLogs));
            }, [workLogs]);

            React.useEffect(() => {
                localStorage.setItem('gas_station_isSmallBusiness', JSON.stringify(isSmallBusiness));
            }, [isSmallBusiness]);

            // Default selection
            React.useEffect(() => {
                if (employees.length > 0 && !selectedEmpId) {
                    setSelectedEmpId(employees[0].id);
                }
            }, [employees, selectedEmpId]);

            const formatMoney = (amount) => Math.floor(amount).toLocaleString() + '원';
            
            const calculateSalary = (empId, yearMonth) => {
                const emp = employees.find(e => e.id === empId);
                if (!emp) return null;

                const logs = workLogs.filter(log => 
                    log.empId === empId && log.date.startsWith(yearMonth)
                );

                let totalHours = 0;
                let basicPay = 0;
                let totalNightCalcHours = 0; 
                let totalHolidayCalcHours = 0; 
                let nightPay = 0; 
                let holidayPay = 0;

                logs.forEach(log => {
                    const hours = parseFloat(log.hours) || 0;
                    totalHours += hours;
                    basicPay += hours * emp.hourlyWage;

                    if (!isSmallBusiness) {
                        const nHours = parseFloat(log.nightHours) || 0;
                        if (nHours > 0) {
                            totalNightCalcHours += nHours;
                            nightPay += nHours * emp.hourlyWage * 0.5;
                        }
                        if (log.isHoliday) {
                            totalHolidayCalcHours += hours;
                            holidayPay += hours * emp.hourlyWage * 0.5;
                        }
                    }
                });

                const weeksInMonth = 4.345;
                const weeklyAvgHours = totalHours / weeksInMonth;
                let juhyuPay = 0;
                let juhyuHours = 0;
                
                if (weeklyAvgHours >= 15) {
                    const juhyuHoursPerWeek = Math.min(weeklyAvgHours, 40) / 40 * 8;
                    juhyuHours = juhyuHoursPerWeek * weeksInMonth; 
                    juhyuPay = juhyuHours * emp.hourlyWage;
                }

                const totalGross = basicPay + nightPay + holidayPay + juhyuPay;

                const pension = totalGross * CONSTANTS.INSURANCE_RATES.PENSION;
                const health = totalGross * CONSTANTS.INSURANCE_RATES.HEALTH;
                const care = health * CONSTANTS.INSURANCE_RATES.CARE;
                const employment = totalGross * CONSTANTS.INSURANCE_RATES.EMPLOYMENT;
                const totalInsurance = pension + health + care + employment;
                
                let incomeTax = 0;
                if (totalGross > 1060000) { 
                    incomeTax = totalGross * 0.015;
                }
                const localTax = incomeTax * 0.1;
                
                const totalDeduction = totalInsurance + incomeTax + localTax;
                const netPay = totalGross - totalDeduction;

                return {
                    empName: emp.name,
                    hourlyWage: emp.hourlyWage,
                    totalHours,
                    totalNightCalcHours,
                    totalHolidayCalcHours,
                    juhyuHours,
                    basicPay,
                    nightPay,
                    holidayPay,
                    juhyuPay,
                    totalGross,
                    pension, health, care, employment,
                    incomeTax, localTax,
                    totalDeduction,
                    netPay
                };
            };

            const StaffView = () => {
                const [newName, setNewName] = React.useState('');
                const [newWage, setNewWage] = React.useState(CONSTANTS.MIN_WAGE_2026);

                const handleAddEmployee = () => {
                    if (!newName) return;
                    const newEmp = {
                        id: generateId(),
                        name: newName,
                        hourlyWage: parseInt(newWage),
                        department: '직원',
                        createdAt: new Date().toISOString()
                    };
                    setEmployees([...employees, newEmp]);
                    setNewName('');
                };

                const handleRemoveEmployee = (id) => {
                    if(confirm('정말 삭제하시겠습니까? 근무 기록은 유지되지만 직원 목록에서 사라집니다.')) {
                        setEmployees(employees.filter(e => e.id !== id));
                        if (selectedEmpId === id) setSelectedEmpId('');
                    }
                };

                const toggleSmallBusiness = () => {
                    setIsSmallBusiness(!isSmallBusiness);
                };

                return (
                    <div className="space-y-4 p-4 pb-24 print:hidden">
                        <div className="bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <div className={`p-2 rounded-lg ${isSmallBusiness ? 'bg-indigo-100 text-indigo-600' : 'bg-gray-100 text-gray-500'}`}>
                                    <Building2 size={24}/>
                                </div>
                                <div>
                                    <h3 className="font-bold text-gray-800">5인 미만 사업장</h3>
                                    <p className="text-xs text-gray-500">{isSmallBusiness ? '야간/휴일 가산수당 미지급' : '야간/휴일 가산수당(1.5배) 적용'}</p>
                                </div>
                            </div>
                            <label className="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" checked={isSmallBusiness} onChange={toggleSmallBusiness} className="sr-only peer"/>
                                <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>

                        <div className="bg-indigo-50 p-4 rounded-xl border border-indigo-100 mb-6">
                            <h2 className="text-lg font-bold text-indigo-900 mb-1">직원 등록</h2>
                            <p className="text-sm text-indigo-700 mb-4">2026년 기준 시급이 기본 적용됩니다.</p>
                            <div className="flex gap-2 items-end">
                                <Input label="이름" value={newName} onChange={(e) => setNewName(e.target.value)} placeholder="홍길동" />
                                <Input label="시급(원)" type="number" value={newWage} onChange={(e) => setNewWage(e.target.value)} />
                                <Button onClick={handleAddEmployee} className="h-[42px] aspect-square !p-0"><Plus size={20}/></Button>
                            </div>
                        </div>

                        <div className="grid gap-3">
                            {employees.map(emp => (
                                <Card key={emp.id} className="p-4 flex justify-between items-center">
                                    <div>
                                        <h3 className="font-bold text-gray-800">{emp.name}</h3>
                                        <p className="text-sm text-gray-500">시급: {emp.hourlyWage.toLocaleString()}원</p>
                                    </div>
                                    <Button variant="ghost" onClick={() => handleRemoveEmployee(emp.id)}><Trash2 size={18} className="text-red-400" /></Button>
                                </Card>
                            ))}
                            {employees.length === 0 && <p className="text-center text-gray-400 py-4">등록된 직원이 없습니다.</p>}
                        </div>
                    </div>
                );
            };

            const CalendarView = () => {
                const [currentDate, setCurrentDate] = React.useState(new Date().toISOString().slice(0, 10));
                const [viewMonth, setViewMonth] = React.useState(selectedMonth);
                
                // 입력창 제어를 위한 Ref 생성
                const inputRef = React.useRef(null);

                React.useEffect(() => { setViewMonth(selectedMonth); }, [selectedMonth]);

                const [hours, setHours] = React.useState('');
                const [nightHours, setNightHours] = React.useState('');
                const [isNight, setIsNight] = React.useState(false);
                const [isHoliday, setIsHoliday] = React.useState(false);

                // 날짜가 변경되면 입력창에 포커스를 줘서 키패드를 띄움
                React.useEffect(() => {
                    const existing = workLogs.find(l => l.empId === selectedEmpId && l.date === currentDate);
                    if (existing) {
                        setHours(existing.hours);
                        setNightHours(existing.nightHours || '');
                        setIsNight(existing.isNight || false);
                        setIsHoliday(existing.isHoliday);
                    } else {
                        setHours('');
                        setNightHours('');
                        setIsNight(false);
                        setIsHoliday(false);
                    }
                    
                    // 날짜 변경 시 입력창으로 포커스 이동 (키패드 활성화)
                    if (inputRef.current) {
                        inputRef.current.focus();
                    }
                }, [currentDate, selectedEmpId, workLogs]);

                // 엔터키 입력 시 처리 (수정됨: 키패드 닫기)
                const handleKeyDown = (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault(); // 기본 동작 방지
                        e.target.blur(); // 키패드 닫기
                    }
                };

                // Auto-save function
                const updateLog = (updates) => {
                    if (!selectedEmpId) { alert('직원을 먼저 선택해주세요.'); return; }
                    
                    const newLog = {
                        empId: selectedEmpId,
                        date: currentDate,
                        hours: updates.hours !== undefined ? parseFloat(updates.hours) : (parseFloat(hours) || 0),
                        nightHours: !isSmallBusiness ? (updates.nightHours !== undefined ? parseFloat(updates.nightHours) : (parseFloat(nightHours) || 0)) : 0,
                        isNight: isSmallBusiness ? (updates.isNight !== undefined ? updates.isNight : isNight) : (updates.nightHours > 0),
                        isHoliday: updates.isHoliday !== undefined ? updates.isHoliday : isHoliday,
                        updatedAt: new Date().toISOString()
                    };

                    const existingIndex = workLogs.findIndex(l => l.empId === selectedEmpId && l.date === currentDate);
                    let updatedLogs;
                    
                    if (existingIndex >= 0) {
                        updatedLogs = [...workLogs];
                        updatedLogs[existingIndex] = newLog;
                    } else {
                        updatedLogs = [...workLogs, newLog];
                    }
                    
                    if (newLog.hours === 0 && !newLog.isHoliday && !newLog.isNight && !newLog.nightHours) {
                         updatedLogs = workLogs.filter(l => !(l.empId === selectedEmpId && l.date === currentDate));
                    }

                    setWorkLogs(updatedLogs);
                };

                const handleHourChange = (val) => {
                    setHours(val);
                    updateLog({ hours: val });
                };

                const handleNightHourChange = (val) => {
                    setNightHours(val);
                    updateLog({ nightHours: val });
                };

                const toggleIsNight = () => {
                    const newVal = !isNight;
                    setIsNight(newVal);
                    updateLog({ isNight: newVal });
                };

                const toggleIsHoliday = () => {
                    const newVal = !isHoliday;
                    setIsHoliday(newVal);
                    updateLog({ isHoliday: newVal });
                };

                const deleteLog = () => {
                    if (!selectedEmpId) return;
                    setWorkLogs(workLogs.filter(l => !(l.empId === selectedEmpId && l.date === currentDate)));
                    setHours(''); setNightHours(''); setIsNight(false); setIsHoliday(false);
                };

                const resetMonth = () => {
                    if(!confirm(`${viewMonth}월의 모든 기록을 삭제하시겠습니까?`)) return;
                    setWorkLogs(workLogs.filter(l => !(l.empId === selectedEmpId && l.date.startsWith(viewMonth))));
                    alert('초기화되었습니다.');
                };

                const calendarDays = React.useMemo(() => {
                    const [year, month] = viewMonth.split('-').map(Number);
                    const firstDay = new Date(year, month - 1, 1).getDay();
                    const lastDate = new Date(year, month, 0).getDate();
                    
                    const days = [];
                    for (let i = 0; i < firstDay; i++) days.push(null);
                    for (let i = 1; i <= lastDate; i++) days.push(i);
                    return days;
                }, [viewMonth]);

                const getLogForDay = (day) => {
                    if (!day) return null;
                    const dateStr = `${viewMonth}-${String(day).padStart(2, '0')}`;
                    return workLogs.find(l => l.empId === selectedEmpId && l.date === dateStr);
                };

                const monthlyTotalHours = workLogs
                    .filter(l => l.empId === selectedEmpId && l.date.startsWith(viewMonth))
                    .reduce((sum, l) => sum + l.hours, 0);

                const hasLog = workLogs.some(l => l.empId === selectedEmpId && l.date === currentDate);

                return (
                    <div className="space-y-4 p-4 pb-24 bg-gray-50 min-h-screen">
                        <div className="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm">
                            <input 
                                type="month" 
                                value={viewMonth} 
                                onChange={(e) => {
                                    setViewMonth(e.target.value);
                                    setSelectedMonth(e.target.value);
                                }}
                                className="font-bold text-lg bg-transparent border-none focus:ring-0 text-gray-800"
                            />
                            <div className="flex items-center gap-2">
                                {isSmallBusiness && <span className="text-[10px] bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full font-bold">5인미만</span>}
                                {!isSmallBusiness && <span className="text-[10px] bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold">5인이상</span>}
                                <select 
                                    className="bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg p-2"
                                    value={selectedEmpId}
                                    onChange={(e) => setSelectedEmpId(e.target.value)}
                                >
                                    {employees.length === 0 && <option>직원 등록 필요</option>}
                                    {employees.map(e => <option key={e.id} value={e.id}>{e.name}</option>)}
                                </select>
                            </div>
                        </div>

                        <Card className="p-4">
                            <div className="flex justify-between items-end mb-4">
                                <h3 className="font-bold text-gray-700">근무 달력</h3>
                                <div className="flex gap-2">
                                    <button onClick={resetMonth} className="text-xs bg-red-50 text-red-600 px-2 py-1 rounded border border-red-100 flex items-center gap-1">
                                        <RotateCcw size={12}/> 초기화
                                    </button>
                                    <span className="text-sm text-indigo-600 font-semibold bg-indigo-50 px-2 py-1 rounded">
                                        총 {monthlyTotalHours}시간
                                    </span>
                                </div>
                            </div>
                            
                            <div className="grid grid-cols-7 text-center mb-2">
                                {['일', '월', '화', '수', '목', '금', '토'].map((d, i) => (
                                    <div key={d} className={`text-xs font-medium ${i === 0 ? 'text-red-400' : 'text-gray-400'}`}>{d}</div>
                                ))}
                            </div>

                            <div className="grid grid-cols-7 gap-1">
                                {calendarDays.map((day, idx) => {
                                    const log = getLogForDay(day);
                                    const dateStr = day ? `${viewMonth}-${String(day).padStart(2, '0')}` : '';
                                    const isSelected = dateStr === currentDate;
                                    
                                    return (
                                        <div 
                                            key={idx} 
                                            onClick={() => day && setCurrentDate(dateStr)}
                                            className={`
                                                aspect-square rounded-lg flex flex-col items-center justify-start pt-1 relative border transition-all
                                                ${!day ? 'invisible border-none' : 'cursor-pointer'}
                                                ${isSelected ? 'border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500 z-10' : 'border-gray-100 bg-white hover:border-indigo-200'}
                                            `}
                                        >
                                            {day && (
                                                <>
                                                    <span className={`text-xs ${idx % 7 === 0 ? 'text-red-400' : 'text-gray-600'}`}>{day}</span>
                                                    {log && (
                                                        <div className="mt-1 flex flex-col items-center">
                                                            <span className="font-bold text-indigo-600 text-sm leading-none">{log.hours}</span>
                                                            {!isSmallBusiness && log.nightHours > 0 && <span className="text-[9px] text-slate-500 leading-none mt-0.5">야{log.nightHours}</span>}
                                                            <div className="flex gap-0.5 mt-0.5">
                                                                {isSmallBusiness && (log.isNight || log.nightHours > 0) && <div className="w-1.5 h-1.5 rounded-full bg-slate-800" title="야간"></div>}
                                                                {log.isHoliday && <div className="w-1.5 h-1.5 rounded-full bg-red-500" title="휴일"></div>}
                                                            </div>
                                                        </div>
                                                    )}
                                                </>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </Card>

                        <Card className="p-4 space-y-4 border-indigo-100 shadow-md">
                            <div className="flex justify-between items-center border-b border-gray-100 pb-2">
                                <span className="font-bold text-lg text-gray-800">{currentDate}</span>
                                {hasLog ? (
                                    <span className="text-xs text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full font-medium">기록 있음</span>
                                ) : (
                                    <span className="text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded-full">미입력</span>
                                )}
                            </div>

                            <div className="space-y-4">
                                <div className="flex flex-col gap-2">
                                    <label className="text-xs font-bold text-gray-500">총 근무 시간 (터치시 자동저장)</label>
                                    <div className="flex gap-2">
                                        {[4, 5, 6, 7, 8].map(h => (
                                            <button key={h} onClick={() => handleHourChange(h)} className={`flex-1 py-3 rounded-xl text-sm border font-medium transition-colors ${parseFloat(hours) === h ? 'bg-indigo-600 text-white border-indigo-600 shadow-md' : 'bg-white text-gray-600 border-gray-200 hover:bg-gray-50'}`}>
                                                {h}시간
                                            </button>
                                        ))}
                                    </div>
                                    <div className="relative">
                                        <input 
                                            ref={inputRef}
                                            type="number" 
                                            inputMode="decimal"
                                            step="0.1"
                                            placeholder="직접 입력 (예: 8.5)" 
                                            value={hours} 
                                            onChange={(e) => handleHourChange(e.target.value)}
                                            onKeyDown={handleKeyDown}
                                            onFocus={(e) => e.target.select()} 
                                            className="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none text-lg font-bold text-gray-800"
                                        />
                                        <span className="absolute right-4 top-3.5 text-gray-400 text-sm">시간</span>
                                    </div>
                                </div>

                                {isSmallBusiness ? (
                                    <div className="flex gap-3 pt-2">
                                        <label className={`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border cursor-pointer transition-all ${isNight ? 'bg-slate-800 border-slate-800 text-white shadow-lg shadow-slate-200' : 'bg-white border-gray-200 text-gray-600 hover:bg-gray-50'}`}>
                                            <input type="checkbox" checked={isNight} onChange={toggleIsNight} className="hidden" />
                                            <Moon size={16} />
                                            <span className="font-bold text-sm">야간</span>
                                        </label>
                                        <label className={`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border cursor-pointer transition-all ${isHoliday ? 'bg-red-500 border-red-500 text-white shadow-lg shadow-red-200' : 'bg-white border-gray-200 text-gray-600 hover:bg-gray-50'}`}>
                                            <input type="checkbox" checked={isHoliday} onChange={toggleIsHoliday} className="hidden" />
                                            <Gift size={16} />
                                            <span className="font-bold text-sm">휴일</span>
                                        </label>
                                    </div>
                                ) : (
                                    <div className="space-y-4">
                                        <div className="flex flex-col gap-2">
                                            <label className="text-xs font-bold text-slate-500 flex items-center gap-1">
                                                <Moon size={12}/> 야간 근무 (22:00~06:00) 포함 시간
                                            </label>
                                            <div className="flex gap-2 items-center">
                                                <div className="relative flex-1">
                                                    <input 
                                                        type="number" 
                                                        inputMode="decimal"
                                                        step="0.1"
                                                        placeholder="야간 시간만 (예: 2)" 
                                                        value={nightHours} 
                                                        onChange={(e) => handleNightHourChange(e.target.value)}
                                                        onKeyDown={handleKeyDown}
                                                        className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-500 focus:outline-none"
                                                    />
                                                    <span className="absolute right-4 top-3.5 text-gray-400 text-sm">시간</span>
                                                </div>
                                                <button onClick={() => handleNightHourChange(Math.min(parseFloat(hours) || 0, 1))} className="px-3 py-3 border rounded-lg text-xs bg-white text-slate-600">1H</button>
                                                <button onClick={() => handleNightHourChange(Math.min(parseFloat(hours) || 0, 2))} className="px-3 py-3 border rounded-lg text-xs bg-white text-slate-600">2H</button>
                                            </div>
                                        </div>
                                        <div className="flex gap-3">
                                            <label className={`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border cursor-pointer transition-all ${isHoliday ? 'bg-red-500 border-red-500 text-white shadow-lg shadow-red-200' : 'bg-white border-gray-200 text-gray-600 hover:bg-gray-50'}`}>
                                                <input type="checkbox" checked={isHoliday} onChange={toggleIsHoliday} className="hidden" />
                                                <Gift size={16} />
                                                <span className="font-bold text-sm">휴일 (1.5배)</span>
                                            </label>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {hasLog && (
                                <Button 
                                    onClick={deleteLog} 
                                    variant="danger" 
                                    className="w-full py-3 text-lg shadow-red-200 bg-red-50 text-red-500 border-red-100 hover:bg-red-100"
                                >
                                    <Trash2 size={18} />
                                    이 날짜 기록 삭제
                                </Button>
                            )}
                        </Card>
                    </div>
                );
            };

            const ListView = () => {
                const handlePrint = () => window.print();

                const copyToClipboard = (str) => {
                    const el = document.createElement('textarea');
                    el.value = str;
                    el.setAttribute('readonly', '');
                    el.style.position = 'absolute';
                    el.style.left = '-9999px';
                    document.body.appendChild(el);
                    el.select();
                    let success = false;
                    try { success = document.execCommand('copy'); } catch (e) {}
                    document.body.removeChild(el);
                    return success;
                };

                const handleShare = () => {
                    const emp = employees.find(e => e.id === selectedEmpId);
                    const logs = workLogs
                        .filter(l => l.empId === selectedEmpId && l.date.startsWith(selectedMonth))
                        .sort((a, b) => a.date.localeCompare(b.date));
                    
                    const totalHours = logs.reduce((acc, curr) => acc + curr.hours, 0);

                    let text = `[${emp?.name} ${selectedMonth} 근무기록]\n\n`;
                    logs.forEach(log => {
                        const date = log.date.slice(5); 
                        let detail = `${log.hours}시간`;
                        
                        if (isSmallBusiness) {
                            if (log.isNight) detail += ' (야간)';
                            if (log.isHoliday) detail += ' (휴일)';
                        } else {
                            if (log.nightHours > 0) detail += ` (야간 ${log.nightHours}h)`;
                            if (log.isHoliday) detail += ' (휴일)';
                        }
                        text += `- ${date}: ${detail}\n`;
                    });
                    text += `\n총 근무: ${totalHours}시간`;
                    
                    if (copyToClipboard(text)) {
                        alert('근무 기록이 복사되었습니다.\n카카오톡이나 문자에 붙여넣기(Paste) 하세요.');
                    } else {
                        alert('복사하기가 지원되지 않는 환경입니다.');
                    }
                };

                const monthlyTotalHours = workLogs
                    .filter(l => l.empId === selectedEmpId && l.date.startsWith(selectedMonth))
                    .reduce((sum, l) => sum + l.hours, 0);

                const sortedLogs = workLogs
                    .filter(l => l.empId === selectedEmpId && l.date.startsWith(selectedMonth))
                    .sort((a, b) => a.date.localeCompare(b.date));

                return (
                    <div className="space-y-4 p-4 pb-24 bg-gray-50 min-h-screen print:bg-white print:p-0 print:pb-0">
                        <div className="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm print:hidden">
                            <input 
                                type="month" 
                                value={selectedMonth} 
                                onChange={(e) => setSelectedMonth(e.target.value)}
                                className="font-bold text-lg bg-transparent border-none focus:ring-0 text-gray-800"
                            />
                            <select 
                                className="bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg p-2"
                                value={selectedEmpId}
                                onChange={(e) => setSelectedEmpId(e.target.value)}
                            >
                                {employees.length === 0 && <option>직원 등록 필요</option>}
                                {employees.map(e => <option key={e.id} value={e.id}>{e.name}</option>)}
                            </select>
                        </div>

                        <div className="hidden print:block text-center mb-6 pt-4 border-b border-gray-900 pb-4">
                            <h1 className="text-2xl font-bold">{selectedMonth} 근무기록부</h1>
                            <p className="text-sm mt-1">
                                직원: {employees.find(e => e.id === selectedEmpId)?.name} 
                                ({isSmallBusiness ? '5인 미만 사업장' : '5인 이상 사업장'})
                            </p>
                        </div>

                        <div className="flex gap-2 print:hidden">
                            <Button onClick={handleShare} variant="secondary" className="flex-1 text-sm bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100">
                                <MessageCircle size={16}/> 카톡/문자 복사
                            </Button>
                            <Button onClick={handlePrint} variant="secondary" className="flex-1 text-sm">
                                <Printer size={16}/> 인쇄하기
                            </Button>
                        </div>

                        <Card className="p-4 print:shadow-none print:border-none">
                            <h3 className="font-bold text-gray-700 mb-2 flex items-center gap-2 print:text-black justify-between">
                                <span className="flex items-center gap-2"><FileText size={16}/> 상세 내역</span>
                                <span className="text-sm bg-indigo-50 text-indigo-600 px-2 py-1 rounded">총 {monthlyTotalHours}시간</span>
                            </h3>
                            <div className="divide-y divide-gray-100 border-t border-gray-100 print:border-gray-300">
                                {sortedLogs.length === 0 ? (
                                    <p className="py-12 text-center text-sm text-gray-400">
                                        기록된 근무가 없습니다.<br/>
                                        '달력' 탭에서 근무를 입력해주세요.
                                    </p>
                                ) : sortedLogs.map(log => (
                                    <div key={log.id} className="py-3 flex justify-between items-center text-sm">
                                        <span className="text-gray-600 print:text-black font-medium">{log.date}</span>
                                        <div className="flex gap-2 items-center">
                                            <span className="font-bold text-gray-800 text-base">{log.hours}시간</span>
                                            {isSmallBusiness ? (
                                                <>
                                                    {log.isNight && <span className="text-[10px] bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded print:border print:border-gray-300">야간</span>}
                                                    {log.isHoliday && <span className="text-[10px] bg-red-50 text-red-600 px-1.5 py-0.5 rounded print:border print:border-gray-300">휴일</span>}
                                                </>
                                            ) : (
                                                <>
                                                    {log.nightHours > 0 && <span className="text-[10px] bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded print:border print:border-gray-300">야간 {log.nightHours}h</span>}
                                                    {log.isHoliday && <span className="text-[10px] bg-red-50 text-red-600 px-1.5 py-0.5 rounded print:border print:border-gray-300">휴일</span>}
                                                </>
                                            )}
                                        </div>
                                    </div>
                                ))}
                                {sortedLogs.length > 0 && (
                                    <div className="py-3 flex justify-between items-center border-t border-gray-200 mt-2 font-bold text-indigo-900 print:text-black text-lg">
                                        <span>합계</span>
                                        <span>{monthlyTotalHours}시간</span>
                                    </div>
                                )}
                            </div>
                        </Card>
                    </div>
                );
            };

            const CalcView = () => {
                const result = React.useMemo(() => calculateSalary(selectedEmpId, selectedMonth), [selectedEmpId, selectedMonth, workLogs, employees, isSmallBusiness]);

                const copyToClipboard = (str) => {
                    const el = document.createElement('textarea');
                    el.value = str;
                    el.setAttribute('readonly', '');
                    el.style.position = 'absolute';
                    el.style.left = '-9999px';
                    document.body.appendChild(el);
                    el.select();
                    let success = false;
                    try { success = document.execCommand('copy'); } catch (e) {}
                    document.body.removeChild(el);
                    return success;
                };

                const handleSharePayslip = () => {
                    if (!result) return;
                    
                    const wage = result.hourlyWage.toLocaleString();
                    const total = Math.floor(result.totalGross).toLocaleString();
                    const net = Math.floor(result.netPay).toLocaleString();
                    const deduc = Math.floor(result.totalDeduction).toLocaleString();
                    
                    let msg = `[급여명세서]\n`;
                    msg += `성명: ${result.empName}\n`;
                    msg += `지급월: ${selectedMonth}\n`;
                    msg += `--------------------------------\n`;
                    msg += `[1] 지급내역 (세전 ${total}원)\n`;
                    msg += `1. 기본급: ${Math.floor(result.basicPay).toLocaleString()}원\n`;
                    msg += `   (계산: ${result.totalHours}시간 x ${wage}원)\n`;
                    
                    if (result.juhyuPay > 0) {
                        msg += `2. 주휴수당: ${Math.floor(result.juhyuPay).toLocaleString()}원\n`;
                        msg += `   (계산: ${result.juhyuHours.toFixed(1)}시간 x ${wage}원)\n`;
                    }
                    
                    if (!isSmallBusiness) {
                        if (result.nightPay > 0) {
                            msg += `3. 야간수당: ${Math.floor(result.nightPay).toLocaleString()}원\n`;
                            msg += `   (계산: ${result.totalNightCalcHours}시간 x ${wage}원 x 0.5)\n`;
                        }
                        if (result.holidayPay > 0) {
                            msg += `4. 휴일수당: ${Math.floor(result.holidayPay).toLocaleString()}원\n`;
                            msg += `   (계산: ${result.totalHolidayCalcHours}시간 x ${wage}원 x 0.5)\n`;
                        }
                    }
                    
                    msg += `--------------------------------\n`;
                    msg += `[2] 공제내역 (총 ${deduc}원)\n`;
                    msg += `- 국민연금: ${Math.floor(result.pension).toLocaleString()}원\n`;
                    msg += `- 건강보험: ${Math.floor(result.health).toLocaleString()}원\n`;
                    msg += `- 장기요양: ${Math.floor(result.care).toLocaleString()}원\n`;
                    msg += `- 고용보험: ${Math.floor(result.employment).toLocaleString()}원\n`;
                    msg += `- 소득세(지방세포함): ${Math.floor(result.incomeTax + result.localTax).toLocaleString()}원\n`;
                    msg += `--------------------------------\n`;
                    msg += `■ 실지급액: ${net}원\n`;
                    msg += `--------------------------------\n`;
                    msg += `* 본 명세서는 근로기준법 제48조에 따라 교부됨.`;

                    if (copyToClipboard(msg)) {
                        alert('급여명세서가 복사되었습니다.\n카카오톡이나 문자에 붙여넣기하세요.');
                    } else {
                        alert('복사 실패. 브라우저 보안 설정을 확인해주세요.');
                    }
                };

                if (!result) return <div className="p-8 text-center text-gray-500">데이터가 없습니다.</div>;

                return (
                    <div className="space-y-4 p-4 pb-24 bg-gray-50 min-h-screen print:hidden">
                        <div className="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm">
                            <input 
                                type="month" 
                                value={selectedMonth} 
                                onChange={(e) => setSelectedMonth(e.target.value)}
                                className="font-bold text-lg bg-transparent border-none focus:ring-0 text-gray-800"
                            />
                            <div className="flex items-center gap-2">
                                {isSmallBusiness && <span className="text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full font-bold">5인 미만</span>}
                                {!isSmallBusiness && <span className="text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full font-bold">5인 이상</span>}
                                <select 
                                    className="bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg p-2"
                                    value={selectedEmpId}
                                    onChange={(e) => setSelectedEmpId(e.target.value)}
                                >
                                    {employees.map(e => <option key={e.id} value={e.id}>{e.name}</option>)}
                                </select>
                            </div>
                        </div>

                        <Card className="p-6 bg-gradient-to-br from-indigo-600 to-indigo-800 text-white border-none">
                            <p className="text-indigo-200 text-sm font-medium mb-1">{employees.find(e => e.id === selectedEmpId)?.name}님의 예상 실수령액</p>
                            <h1 className="text-4xl font-bold mb-4">{formatMoney(result.netPay)}</h1>
                            <div className="flex gap-4 text-sm text-indigo-100 bg-white/10 p-3 rounded-lg">
                                <div className="flex-1">
                                    <span className="block text-xs opacity-70">총 지급액</span>
                                    <span className="font-semibold">{formatMoney(result.totalGross)}</span>
                                </div>
                                <div className="w-px bg-white/20"></div>
                                <div className="flex-1">
                                    <span className="block text-xs opacity-70">총 공제액</span>
                                    <span className="font-semibold">{formatMoney(result.totalDeduction)}</span>
                                </div>
                            </div>
                        </Card>

                        <div className="flex gap-2">
                            <Button onClick={handleSharePayslip} className="flex-1 py-4 bg-white text-indigo-600 border border-indigo-200 hover:bg-indigo-50 shadow-sm">
                                <Send size={18} />
                                명세서 복사
                            </Button>
                        </div>

                        <div className="space-y-3">
                            <h3 className="font-bold text-gray-700 ml-1 flex items-center gap-2">
                                <Calculator size={18}/> 급여 상세 명세
                            </h3>
                            
                            <Card className="divide-y divide-gray-100">
                                <div className="p-4 space-y-2">
                                    <div className="flex justify-between text-sm">
                                        <span className="text-gray-600">총 근로시간</span>
                                        <span className="font-medium">{result.totalHours}시간</span>
                                    </div>
                                    <div className="flex justify-between text-sm">
                                        <span className="text-gray-600">기본급</span>
                                        <span className="font-medium">{formatMoney(result.basicPay)}</span>
                                    </div>
                                    {result.juhyuPay > 0 && (
                                        <div className="flex justify-between text-sm text-blue-600">
                                            <span className="flex items-center gap-1">주휴수당 <Info size={12}/></span>
                                            <span className="font-medium">{formatMoney(result.juhyuPay)}</span>
                                        </div>
                                    )}
                                    {!isSmallBusiness && (result.nightPay > 0 || result.holidayPay > 0) && (
                                        <div className="flex justify-between text-sm text-orange-600">
                                            <span>추가 수당(야간/휴일)</span>
                                            <span className="font-medium">{formatMoney(result.nightPay + result.holidayPay)}</span>
                                        </div>
                                    )}
                                    <div className="pt-2 flex justify-between font-bold text-indigo-900 border-t border-gray-100 mt-2">
                                        <span>지급 합계</span>
                                        <span>{formatMoney(result.totalGross)}</span>
                                    </div>
                                </div>
                            </Card>

                            <Card className="divide-y divide-gray-100">
                                <div className="p-4 space-y-2">
                                    <div className="flex justify-between text-sm">
                                        <span className="text-gray-500">국민연금 (4.5%)</span>
                                        <span className="text-gray-700">{formatMoney(result.pension)}</span>
                                    </div>
                                    <div className="flex justify-between text-sm">
                                        <span className="text-gray-500">건강보험 (3.545%)</span>
                                        <span className="text-gray-700">{formatMoney(result.health)}</span>
                                    </div>
                                    <div className="flex justify-between text-sm">
                                        <span className="text-gray-500">장기요양 (12.95%)</span>
                                        <span className="text-gray-700">{formatMoney(result.care)}</span>
                                    </div>
                                    <div className="flex justify-between text-sm">
                                        <span className="text-gray-500">고용보험 (0.9%)</span>
                                        <span className="text-gray-700">{formatMoney(result.employment)}</span>
                                    </div>
                                    <div className="flex justify-between text-sm">
                                        <span className="text-gray-500">소득세(지방세 포함)</span>
                                        <span className="text-gray-700">{formatMoney(result.incomeTax + result.localTax)}</span>
                                    </div>
                                    <div className="pt-2 flex justify-between font-bold text-gray-700 border-t border-gray-100 mt-2">
                                        <span>공제 합계</span>
                                        <span>{formatMoney(result.totalDeduction)}</span>
                                    </div>
                                </div>
                            </Card>

                            <p className="text-xs text-gray-400 text-center px-4 py-2 leading-relaxed">
                                * 본 계산 결과는 입력된 2026년 기준값 및 간이 로직에 따른 예상치이며, 실제 급여와 다를 수 있습니다.<br/>
                                (주휴수당은 월 평균 주수 기준, 세금은 간이세액 추정치 적용)
                            </p>
                        </div>
                    </div>
                );
            };

            const HelpView = () => {
                return (
                    <div className="space-y-4 p-4 pb-24 bg-gray-50 min-h-screen">
                        <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-4">
                            <h2 className="text-xl font-bold text-indigo-800 mb-2">사용 설명서</h2>
                            <p className="text-sm text-gray-600 leading-relaxed">
                                2026년 최저시급(10,320원)이 적용된 똑똑한 급여 계산기입니다.<br/>
                                복잡한 엑셀 없이 터치 몇 번으로 급여 관리와 명세서 발송까지 해결하세요.
                            </p>
                            <div className="mt-4 flex gap-2">
                                <span className="text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-bold">자동 저장</span>
                                <span className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-bold">법적 준수</span>
                            </div>
                        </div>

                        <Card className="p-5 space-y-4">
                            <div className="flex items-center gap-3 mb-2">
                                <div className="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold">1</div>
                                <h3 className="font-bold text-gray-800 text-lg">직원 등록 및 설정</h3>
                            </div>
                            <div className="ml-11 space-y-2 text-sm text-gray-600">
                                <p>가장 먼저 하단 <strong>[직원]</strong> 탭으로 이동하세요.</p>
                                <ul className="list-disc pl-4 space-y-1">
                                    <li>이름과 시급을 입력하고 <strong>(+)</strong> 버튼을 눌러 직원을 추가합니다.</li>
                                    <li><strong>5인 미만 사업장</strong>이라면 상단의 스위치를 켜주세요. (야간/휴일/연장 근로에 대한 1.5배 가산수당이 계산되지 않습니다.)</li>
                                </ul>
                            </div>
                        </Card>

                        <Card className="p-5 space-y-4">
                            <div className="flex items-center gap-3 mb-2">
                                <div className="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold">2</div>
                                <h3 className="font-bold text-gray-800 text-lg">근무 기록 입력</h3>
                            </div>
                            <div className="ml-11 space-y-2 text-sm text-gray-600">
                                <p><strong>[달력]</strong> 탭에서 매일의 근무를 기록합니다.</p>
                                <ul className="list-disc pl-4 space-y-1">
                                    <li>달력에서 날짜를 선택합니다.</li>
                                    <li><strong>4시간, 8시간</strong> 등 빠른 입력 버튼을 누르면 즉시 저장됩니다.</li>
                                    <li>직접 시간을 입력할 경우, 숫자를 입력하고 엔터(완료)를 누르면 저장되고 <strong>키패드가 닫힙니다.</strong></li>
                                    <li><strong>[초기화]</strong> 버튼을 누르면 해당 월의 모든 기록을 삭제할 수 있습니다.</li>
                                </ul>
                            </div>
                        </Card>

                        <Card className="p-5 space-y-4">
                            <div className="flex items-center gap-3 mb-2">
                                <div className="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold">3</div>
                                <h3 className="font-bold text-gray-800 text-lg">내역 확인 및 인쇄</h3>
                            </div>
                            <div className="ml-11 space-y-2 text-sm text-gray-600">
                                <p><strong>[내역]</strong> 탭에서 한 달 치 근무 기록을 모아봅니다.</p>
                                <ul className="list-disc pl-4 space-y-1">
                                    <li>리스트 형태로 근무 날짜와 시간을 한눈에 확인할 수 있습니다.</li>
                                    <li><strong>[카톡/문자 복사]</strong> 버튼으로 근무 내역 텍스트를 복사하여 직원에게 보낼 수 있습니다.</li>
                                    <li><strong>[인쇄하기]</strong> 버튼을 누르면 A4 용지에 맞게 깔끔하게 출력됩니다.</li>
                                </ul>
                            </div>
                        </Card>

                        <Card className="p-5 space-y-4">
                            <div className="flex items-center gap-3 mb-2">
                                <div className="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold">4</div>
                                <h3 className="font-bold text-gray-800 text-lg">급여 정산 및 명세서</h3>
                            </div>
                            <div className="ml-11 space-y-2 text-sm text-gray-600">
                                <p><strong>[정산]</strong> 탭에서 최종 급여를 확인합니다.</p>
                                <ul className="list-disc pl-4 space-y-1">
                                    <li><strong>주휴수당:</strong> 주 15시간 이상 근무 시 자동으로 계산되어 포함됩니다.</li>
                                    <li><strong>4대보험 및 세금:</strong> 2026년 요율을 기준으로 예상 공제액을 보여줍니다.</li>
                                    <li><strong>[명세서 복사]</strong> 버튼을 누르면, 근로기준법 제48조에 따른 필수 항목(임금 구성항목, 계산방법, 공제내역)이 포함된 텍스트가 복사됩니다. 이를 카톡이나 문자로 직원에게 전송하세요.</li>
                                </ul>
                            </div>
                        </Card>

                        <Card className="p-5 space-y-4 bg-yellow-50 border-yellow-100">
                            <div className="flex items-center gap-3 mb-2">
                                <Info size={24} className="text-yellow-600"/>
                                <h3 className="font-bold text-yellow-800 text-lg">주의사항 (로컬 저장)</h3>
                            </div>
                            <div className="ml-11 space-y-2 text-sm text-yellow-700">
                                <p>이 프로그램은 <strong>인터넷 연결 없이</strong> 사용자의 <strong>브라우저(컴퓨터/핸드폰)에만</strong> 데이터를 저장합니다.</p>
                                <ul className="list-disc pl-4 space-y-1">
                                    <li>서버에 저장되지 않으므로, <strong>브라우저 캐시를 삭제</strong>하면 데이터가 사라질 수 있습니다.</li>
                                    <li>다른 기기(예: 핸드폰 ↔ 컴퓨터)와 데이터가 연동되지 않습니다.</li>
                                    <li>중요한 기록은 주기적으로 [내역] 탭에서 인쇄하거나 텍스트로 복사해두시길 권장합니다.</li>
                                </ul>
                            </div>
                        </Card>
                    </div>
                );
            };

            return (
                <div className="max-w-md mx-auto bg-white min-h-screen shadow-2xl relative overflow-hidden font-sans text-gray-900 print:shadow-none print:max-w-none print:overflow-visible">
                    <header className="relative w-full h-40 bg-gray-800 sticky top-0 z-20 shadow-md print:hidden overflow-hidden">
                        <img 
                            src="https://images.unsplash.com/photo-1527018601619-a508a2be00cd?auto=format&fit=crop&w=800&q=80" 
                            alt="Gas Station Background" 
                            className="absolute inset-0 w-full h-full object-cover opacity-70"
                        />
                        <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div>
                        <div className="absolute bottom-0 left-0 w-full p-5">
                            <h1 className="text-xl font-bold text-white mb-1 drop-shadow-md">
                                (사)한국주유소협회 경기도회
                            </h1>
                            <div className="flex items-center gap-2">
                                <span className="text-xs font-bold text-white bg-blue-600 px-2 py-1 rounded shadow-sm">
                                    간단 월급계산기 V2
                                </span>
                            </div>
                        </div>
                    </header>

                    <main className="h-full">
                        {activeTab === 'help' && <HelpView />}
                        {activeTab === 'staff' && <StaffView />}
                        {activeTab === 'calendar' && <CalendarView />}
                        {activeTab === 'list' && <ListView />}
                        {activeTab === 'calc' && <CalcView />}
                    </main>

                    <nav className="fixed bottom-0 w-full max-w-md bg-white border-t border-gray-200 flex justify-around py-2 pb-4 z-20 text-xs font-medium text-gray-400 print:hidden">
                        <button 
                            onClick={() => setActiveTab('help')}
                            className={`flex flex-col items-center gap-1 p-2 rounded-lg transition-colors ${activeTab === 'help' ? 'text-indigo-600 bg-indigo-50' : 'hover:bg-gray-50'}`}
                        >
                            <BookOpen size={24} />
                            설명서
                        </button>
                        <button 
                            onClick={() => setActiveTab('staff')}
                            className={`flex flex-col items-center gap-1 p-2 rounded-lg transition-colors ${activeTab === 'staff' ? 'text-indigo-600 bg-indigo-50' : 'hover:bg-gray-50'}`}
                        >
                            <Users size={24} />
                            직원
                        </button>
                        <button 
                            onClick={() => setActiveTab('calendar')}
                            className={`flex flex-col items-center gap-1 p-2 rounded-lg transition-colors ${activeTab === 'calendar' ? 'text-indigo-600 bg-indigo-50' : 'hover:bg-gray-50'}`}
                        >
                            <Calendar size={24} />
                            달력
                        </button>
                        <button 
                            onClick={() => setActiveTab('list')}
                            className={`flex flex-col items-center gap-1 p-2 rounded-lg transition-colors ${activeTab === 'list' ? 'text-indigo-600 bg-indigo-50' : 'hover:bg-gray-50'}`}
                        >
                            <List size={24} />
                            내역
                        </button>
                        <button 
                            onClick={() => setActiveTab('calc')}
                            className={`flex flex-col items-center gap-1 p-2 rounded-lg transition-colors ${activeTab === 'calc' ? 'text-indigo-600 bg-indigo-50' : 'hover:bg-gray-50'}`}
                        >
                            <Calculator size={24} />
                            정산
                        </button>
                    </nav>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
